<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog — Aiventure</title>
    <meta name="description" content="Latest news, insights, and updates about AI travel tools and the future of travel planning.">
    <link rel="canonical" href="https://www.aiventure.me/pages/blog.html">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,500;0,9..144,700;1,9..144,400&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/styles.css">
</head>
<body>
    <div class="bg-decoration"><div class="bg-circle bg-circle-1"></div><div class="bg-circle bg-circle-2"></div><div class="bg-grid"></div></div>

    <nav>
        <a href="/" class="logo"><div class="logo-icon">✈</div>Aiventure</a>
        <ul class="nav-links"><li><a href="/#featured">Featured</a></li><li><a href="/pages/categories.html">Categories</a></li><li><a href="/pages/blog.html">Blog</a></li><li><a href="/pages/about.html">About</a></li></ul>
        <a href="/pages/submit.html" class="submit-btn">Submit Tool</a>
    </nav>

    <main>
        <div class="page-header">
            <div class="breadcrumb"><a href="/">Home</a><span>→</span><span class="current">Blog</span></div>
            <h1>Blog</h1>
            <p>Latest news, insights, and updates about AI travel tools and the future of travel planning.</p>
        </div>

        <!-- Featured Post -->
        <section class="section" style="padding-top: 0;">
            <div id="featuredPost" style="display: none;">
                <!-- Populated by JavaScript -->
            </div>
            <div id="featuredLoading" style="background: linear-gradient(135deg, var(--slate), var(--ink)); border-radius: 30px; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                <p style="color: rgba(255,255,255,0.6);">Loading featured post...</p>
            </div>
        </section>

        <!-- Blog Grid -->
        <section class="section">
            <h2 class="section-title"><span class="small">Latest Posts</span>Recent Articles</h2>
            <div id="blogGrid" class="grid-3">
                <!-- Populated by JavaScript -->
            </div>
            <div id="blogLoading" style="text-align: center; padding: 60px;">
                <p style="color: var(--mist);">Loading articles...</p>
            </div>
            <div id="noPosts" style="display: none; text-align: center; padding: 60px;">
                <p style="color: var(--mist);">No blog posts yet. Check back soon!</p>
            </div>
        </section>

        <!-- Newsletter -->
        <section class="newsletter-section">
            <h2>Stay in the Loop</h2>
            <p>Get the latest AI travel news and tool reviews delivered to your inbox.</p>
            <form class="newsletter-form" id="newsletterForm">
                <input type="email" placeholder="Enter your email" required id="newsletterEmail">
                <button type="submit">Subscribe</button>
            </form>
            <p id="newsletterMessage" style="margin-top: 12px; display: none;"></p>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-brand"><div class="footer-logo">Aiventure</div><p class="footer-desc">The most comprehensive directory of AI-powered travel tools.</p></div>
            <div class="footer-links">
                <div class="footer-column"><h4>Directory</h4><ul><li><a href="/pages/all-tools.html">All Tools</a></li><li><a href="/pages/categories.html">Categories</a></li><li><a href="/pages/new-additions.html">New Additions</a></li><li><a href="/pages/top-rated.html">Top Rated</a></li></ul></div>
                <div class="footer-column"><h4>Resources</h4><ul><li><a href="/pages/blog.html">Blog</a></li><li><a href="/pages/guides.html">Guides</a></li><li><a href="/pages/newsletter.html">Newsletter</a></li><li><a href="/pages/api.html">API</a></li></ul></div>
                <div class="footer-column"><h4>Company</h4><ul><li><a href="/pages/about.html">About</a></li><li><a href="/pages/contact.html">Contact</a></li><li><a href="/pages/submit.html">Submit Tool</a></li><li><a href="/pages/advertise.html">Advertise</a></li></ul></div>
            </div>
        </div>
        <div class="footer-bottom"><p>© 2026 Aiventure. All rights reserved.</p></div>
    </footer>

    <script>
        // Fetch and display blog posts
        async function loadBlogPosts() {
            try {
                const response = await fetch('/api/blog');
                const result = await response.json();
                
                document.getElementById('blogLoading').style.display = 'none';
                document.getElementById('featuredLoading').style.display = 'none';
                
                if (!result.success || result.data.length === 0) {
                    document.getElementById('noPosts').style.display = 'block';
                    return;
                }
                
                const posts = result.data;
                
                // Find featured post
                const featuredPost = posts.find(p => p.featured) || posts[0];
                const otherPosts = posts.filter(p => p.id !== featuredPost.id);
                
                // Render featured post
                if (featuredPost) {
                    document.getElementById('featuredPost').innerHTML = renderFeaturedPost(featuredPost);
                    document.getElementById('featuredPost').style.display = 'block';
                }
                
                // Render other posts
                if (otherPosts.length > 0) {
                    document.getElementById('blogGrid').innerHTML = otherPosts.map(renderBlogCard).join('');
                }
                
            } catch (error) {
                console.error('Failed to load blog posts:', error);
                document.getElementById('blogLoading').innerHTML = '<p style="color: var(--mist);">Failed to load posts. Please try again later.</p>';
                document.getElementById('featuredLoading').style.display = 'none';
            }
        }
        
        function renderFeaturedPost(post) {
            const date = new Date(post.publishedAt).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            return `
                <a href="${post.url}" style="text-decoration: none; display: block;">
                    <div style="background: linear-gradient(135deg, var(--slate), var(--ink)); border-radius: 30px; overflow: hidden; display: grid; grid-template-columns: 1fr 1fr; min-height: 400px;">
                        <div style="padding: 50px; display: flex; flex-direction: column; justify-content: center;">
                            <span style="background: var(--arctic); color: white; padding: 6px 14px; border-radius: 100px; font-size: 0.75rem; font-weight: 600; width: fit-content; margin-bottom: 20px;">FEATURED</span>
                            <h2 style="font-family: 'Fraunces', serif; font-size: 2rem; color: white; margin-bottom: 16px; line-height: 1.3;">${escapeHtml(post.title)}</h2>
                            <p style="color: rgba(255,255,255,0.7); margin-bottom: 24px; line-height: 1.7;">${escapeHtml(post.excerpt)}</p>
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <span style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">${date}</span>
                                <span style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">•</span>
                                <span style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">${post.readTime} min read</span>
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, ${post.coverColor}); display: flex; align-items: center; justify-content: center; font-size: 8rem;">${post.icon}</div>
                    </div>
                </a>
            `;
        }
        
        function renderBlogCard(post) {
            const date = new Date(post.publishedAt);
            const monthDay = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            return `
                <a href="${post.url}" class="blog-card">
                    <div class="blog-image" style="background: linear-gradient(135deg, ${post.coverColor});">
                        <span class="blog-date-badge">${monthDay}</span>
                        ${post.icon}
                    </div>
                    <div class="blog-content">
                        <div class="blog-tags"><span class="tag">${escapeHtml(post.category)}</span></div>
                        <h3 class="blog-title">${escapeHtml(post.title)}</h3>
                        <p class="blog-excerpt">${escapeHtml(post.excerpt)}</p>
                    </div>
                </a>
            `;
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // Newsletter form
        document.getElementById('newsletterForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('newsletterEmail').value;
            const msg = document.getElementById('newsletterMessage');
            
            try {
                const response = await fetch('/api/newsletter', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });
                const result = await response.json();
                
                msg.style.display = 'block';
                if (result.success) {
                    msg.style.color = '#10B981';
                    msg.textContent = '✓ Subscribed successfully!';
                    document.getElementById('newsletterEmail').value = '';
                } else {
                    msg.style.color = '#EF4444';
                    msg.textContent = result.error || 'Failed to subscribe';
                }
            } catch (error) {
                msg.style.display = 'block';
                msg.style.color = '#EF4444';
                msg.textContent = 'Failed to subscribe. Please try again.';
            }
        });
        
        // Load posts on page load
        loadBlogPosts();
    </script>
</body>
</html>
